<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="ak.css">
</head>
<body>
    <div class="slider-container">
        <div class="slide">
            <img
                src="https://picsum.photos/id/352/1000/500.jpg" />
        </div>
        <div class="slide">
            <img
                src="https://picsum.photos/id/208/1000/500.jpg" />
        </div>
        <div class="slide">
            <img
                src="https://picsum.photos/id/128/1000/500.jpg" />
        </div>
        <div class="slide">
            <img
                src="https://picsum.photos/id/118/1000/500.jpg" />
        </div>
        <div class="slide">
            <img src="https://picsum.photos/id/300/1000/500.jpg"
                alt="" />
        </div>
       <div class="dotes">
       </div>
    </div>

    <script>
    const sliders = document.querySelector('.slider-container'),
            slides = Array.from(document.querySelectorAll('.slide'));

        let isDragging = false,
            startpos = 0,
            currentTranslate = 0,
            prevTranslate = 0,
            animationID,
            currentIndex = 0

        slides.forEach((slide, index) => {
            const slideImg = slide.querySelector('img')
            // disable default img drag
            slideImg.addEventListener('dragstart',(e)=> e.preventDefault());
            slide.addEventListener('pointerdown',pointerDown(index));
            slide.addEventListener('pointerup', pointerUp);
            slide.addEventListener('pointerleave', pointerUp);
            slide.addEventListener('pointermove', pointerMove);
        });
        
        const dotscontainer = document.querySelector('.dotes');

        slides.forEach(()=>{
           const dot = document.createElement("div");
           dot.classList.add("dot");
           dotscontainer.appendchild(dot)
        })

        const dots = Array.from(dotscontainer.children);

        dotscontainer.addEventListener("click",)

        window.addEventListener("resize", setPositionByIndex)

        

        function pointerDown(index) {
            return function (event) {
                currentIndex = index;
                startpos = event.clientX;
                isDragging = true;
                animationID = requestAnimationFrame(animation)
                sliders.classList.add('grabbing');
            }
        }

        function pointerMove(event) {
            if (isDragging) {
                const currentPosition = event.clientX
                currentTranslate = prevTranslate + currentPosition - startpos;
            }
        }
        function pointerUp() {
            cancelAnimationFrame(animationID);
            isDragging = false
            const movedby = currentTranslate - prevTranslate;

            if (movedby < -100 && currentIndex < slides.length - 1) currentIndex += 1

            if (movedby > 100 && currentIndex > 0) currentIndex -= 1

            setPositionByIndex();

            sliders.classList.remove('grabbing');
        }
        function animation() {
            sliderpos();
            if (isDragging) requestAnimationFrame(animation);
        }

        function setPositionByIndex() {
            currentTranslate = currentIndex * - window.innerWidth;
            prevTranslate = currentTranslate;
            sliderpos();
        }

        function sliderpos() {
            sliders.style.transform = `translateX(${currentTranslate}px)`;
        }

    </script>
</body>
</html>
